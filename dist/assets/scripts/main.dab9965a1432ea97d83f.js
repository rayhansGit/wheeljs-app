(()=>{"use strict";function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const e=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.idle_time=0,this.countMouseIdleTime()}var i,n;return i=e,(n=[{key:"countMouseIdleTime",value:function(){var t=this,e=this,i=setInterval((function(){e.idle_time=e.idle_time+1,e.idle_time>15&&(1==confirm("Would you like to continue?")?e.idle_time=0:clearInterval(i))}),1e3);document.addEventListener("keyup",(function(e){t.idle_time=0}),!1),document.addEventListener("mouseover",(function(e){t.idle_time=0}),!1)}}])&&t(i.prototype,n),Object.defineProperty(i,"prototype",{writable:!1}),e}();function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events()}var e,n;return e=t,(n=[{key:"events",value:function(){}},{key:"setLocalStorageData",value:function(t,e){""!=e&&localStorage.setItem(t,JSON.stringify(e))}},{key:"getLocalStorageData",value:function(t){return"undefined"!=t?JSON.parse(localStorage.getItem(t)):{}}},{key:"removeLocalStorageData",value:function(t){"undefined"!=t&&localStorage.removeItem(t)}}])&&i(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.popup=document.getElementById("popup"),this.feedback_form=document.getElementById("feedback-form"),this.user_id=document.getElementById("user_id"),this.user_id.value="",this.user_local_storage_key="spin_user_data",this.user_id.focus(),this.events(),this.app_local_storage=new n,this.user_id_exist=!1,this.user_info=this.app_local_storage.getLocalStorageData(this.user_local_storage_key),console.log(this.user_info),null!=this.user_info&&this.destoryPopUp()}var e,i;return e=t,(i=[{key:"events",value:function(){this.feedback_form.addEventListener("submit",this.handleForm.bind(this))}},{key:"handleForm",value:function(t){if(t.preventDefault(),""!=this.user_id.value.trim()){var e=[{game_id:"gg_2874764",user_id:this.user_id.value.trim(),user_point:"0",bot_point:"0"}];this.app_local_storage.setLocalStorageData(this.user_local_storage_key,e),this.destoryPopUp()}else alert("User id is required."),this.user_id.value="",this.user_id.focus()}},{key:"destoryPopUp",value:function(){this.popup.remove(),document.querySelector("body").removeAttribute("class")}}])&&s(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.wheelPower=0,this.wheelSpinning=!1,this.player_one=!0,this.botPlay=!1,this.title_player_one="You",this.title_player_two="Player 2",this.playerPoint=0,this.botPoint=0,this.discount_player_one=0,this.discount_player_two=0,this.spin_duration=25,this.wheel_spins_count=1e3,this.spinTimoutInterval=3e3,this.theWheel=new Winwheel({numSegments:5,outerRadius:212,textFontSize:28,responsive:!0,segments:[{fillStyle:"#7de6ef",text:"30%"},{fillStyle:"#e7706f",text:"40%"},{fillStyle:"#89f26e",text:"50%"},{fillStyle:"#29a1dd",text:"60%"},{fillStyle:"#eae56f",text:"70%"}],animation:{direction:"clockwise",type:"spinOngoing",duration:this.spin_duration,spins:this.wheel_spins_count,callbackFinished:this.alertPrize.bind(this)}}),this.btn_start_spin=document.getElementById("startSpin"),this.btn_stop_spin=document.getElementById("stopSpin"),this.result_container=document.getElementById("result_container"),this.result_player_one=document.getElementById("result_player_one"),this.result_player_two=document.getElementById("result_player_two"),this.final_result=document.getElementById("final_result"),this.events()}var e,i;return e=t,(i=[{key:"events",value:function(){this.btn_start_spin.addEventListener("click",this.startSpin.bind(this)),this.btn_stop_spin.addEventListener("click",this.stopSpin.bind(this))}},{key:"startSpin",value:function(){this.wheelSpinning||(this.wheelSpinning=!0,this.theWheel.startAnimation(),this.botPlay||(this.result_container.style.display="block",this.result_player_one.innerHTML=this.title_player_one+" are playing!",this.result_player_one.classList.add("current-player"),this.btn_start_spin.style.display="none",this.btn_stop_spin.style.display="initial",this.btn_stop_spin.className="btnGlow"))}},{key:"stopSpin",value:function(){var t=this;this.theWheel.animation.spins=this.wheel_spins_count-500,this.theWheel.startAnimation(),setTimeout((function(){t.theWheel.stopAnimation(),t.wheelSpinning=!1}),this.spinTimoutInterval),this.botPlay||(this.btn_stop_spin.className="btnFlat",this.btn_stop_spin.style.display="none",this.result_player_one.innerHTML="Calculating score ...",setTimeout((function(){t.result_player_one.classList.remove("current-player"),t.result_player_two.classList.add("current-player"),t.botPlay=!0,t.playBot()}),this.spinTimoutInterval+3e3))}},{key:"playBot",value:function(){var t=this;this.botPlay?(this.btn_stop_spin.style.display="none",this.result_player_two.innerHTML=this.title_player_two+" is playing!",document.getElementById("stopSpin").innerHTML="Playing "+this.title_player_two,this.startSpin(),setTimeout((function(){t.stopSpin()}),this.spinTimoutInterval)):this.botPlay=!1}},{key:"resetWheel",value:function(){this.theWheel.stopAnimation(!1),this.theWheel.rotationAngle=0,this.theWheel.draw(),this.wheelSpinning=!1}},{key:"alertPrize",value:function(t){this.botPlay?(this.botPoint=parseInt(t.text),this.result_player_two.innerHTML=this.title_player_two+" got <b>"+this.botPoint+"%</b>"):(this.playerPoint=parseInt(t.text),this.result_player_one.innerHTML=this.title_player_one+" got <b>"+this.playerPoint+"%</b>"),this.processResult(this.botPoint,this.playerPoint)}},{key:"processResult",value:function(t,e){0!=t&&0!=e&&(this.btn_start_spin.style.display="none",this.discount_player_one=e,this.discount_player_two=t,this.final_result.style.display="block",this.btn_stop_spin.style.display="none",t==e?(this.result_container.innerHTML="<div class=\"result_tie\">It's a Tie, Let's play again!</div>",setTimeout((function(){window.location.reload()}),2e3)):this.final_result.innerHTML=t>e?this.title_player_one+" Lose!<br><b>Final Discount:"+this.calculateDiscount()+"</b>":this.title_player_one+" Win!<br><b>Final Discount:"+this.calculateDiscount()+"</b>",this.result_player_one.classList.remove("current-player"),this.result_player_two.classList.remove("current-player"))}},{key:"calculateDiscount",value:function(){return this.discount_player_one+(this.discount_player_one-this.discount_player_two)/2+"%"}}])&&l(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()),new e,new o})();